<!DOCTYPE html>
<html lang="kn">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ajay Kumar — Premium Quiz (200 Q)</title>
<style>
  :root{
    --bg1:#003b8e; --bg2:#007bff; --accent:#ffd24d;
    --card-bg: rgba(255,255,255,0.04);
    --muted: rgba(255,255,255,0.75);
    --success:#16a34a; --danger:#ef4444;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Segoe UI, Roboto, "Noto Sans Kannada", Arial;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:#fff}
  .wrap{max-width:1100px;margin:20px auto;padding:18px}
  .header{display:flex;gap:16px;align-items:center}
  .logo{width:72px;height:72px;border-radius:12px;background:linear-gradient(135deg,#fff2c2,#ffd24d);display:flex;align-items:center;justify-content:center;color:#003b8e;font-weight:800;font-size:22px;box-shadow:0 8px 30px rgba(0,0,0,0.25)}
  h1{margin:0;font-size:28px}
  p.lead{margin:6px 0 0;color:var(--muted)}
  .marquee{background:var(--accent);color:#03203b;padding:10px;border-radius:8px;margin:16px 0;font-weight:700;overflow:hidden;white-space:nowrap}
  .main{display:flex;gap:20px;margin-top:18px}
  .left{flex:1}
  .right{width:320px}
  .card{background:var(--card-bg);padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.06);box-shadow:0 8px 24px rgba(0,0,0,0.28)}
  .register{display:flex;flex-direction:column;gap:12px;align-items:center}
  input[type="text"]{padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.08);width:80%;font-size:16px;background:transparent;color:#fff}
  .btn{padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
  .btn-primary{background:var(--accent);color:#002b5b}
  .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#fff}
  .meta{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:12px}
  .timer{font-weight:800;background:rgba(255,255,255,0.04);padding:8px 12px;border-radius:10px}
  .progress{flex:1;height:10px;background:rgba(255,255,255,0.06);border-radius:8px;overflow:hidden;margin-left:12px}
  .progress > i{display:block;height:100%;background:linear-gradient(90deg,#ffd24d,#ff8a00);width:0%}
  .question-title{font-size:20px;margin:6px 0 14px}
  .options{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .opt{background:rgba(255,255,255,0.03);padding:12px;border-radius:10px;cursor:pointer;border:1px solid rgba(255,255,255,0.04);text-align:left;transition:all .12s}
  .opt:hover{transform:translateY(-3px)}
  .opt.selected{outline:3px solid rgba(255,255,255,0.06)}
  .opt.correct{background:var(--success);color:#04260f;font-weight:800}
  .opt.wrong{background:var(--danger);color:#2b0000;font-weight:800}
  .controls{display:flex;gap:10px;align-items:center;margin-top:14px}
  .small-muted{color:var(--muted);font-size:13px}
  .side-list{display:flex;flex-direction:column;gap:12px}
  .info-row{display:flex;justify-content:space-between;color:var(--muted);font-size:14px}
  .result-table{background:#fff;color:#000;padding:12px;border-radius:10px;max-height:420px;overflow:auto}
  .qa{margin-bottom:10px;padding-bottom:8px;border-bottom:1px dashed #ddd}
  @media(max-width:980px){.main{flex-direction:column}.right{width:100%}.options{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="wrap">
  <div class="header">
    <div class="logo">AJ</div>
    <div>
      <h1>AJAY KUMAR QUESTION BANK</h1>
      <p class="lead">ಇತಿಹಾಸ, ವಿಜ್ಞಾನ, ಭೂಗೋಳಶಾಸ್ತ್ರ — ಮಿಶ್ರ 200 ಪ್ರಶ್ನೆಗಳು</p>
    </div>
  </div>

  <div class="marquee">⚡ ಕನಿಷ್ಟ 50 ಪ್ರಶ್ನೆಗಳಿಗೆ ಉತ್ತರಿಸಿದರೆ ನೀವು ಚೆನ್ನಾಗಿ ಓದುತ್ತೀರಿ ಎಂದರ್ಥ. ⚡</div>

  <div class="main">
    <div class="left">
      <!-- Registration -->
      <div id="introCard" class="card">
        <h3>Welcome — ಹೆಸರು ನಮೂದಿಸಿ / Enter your name</h3>
        <div class="register">
          <input type="text" id="username" placeholder="ನಿಮ್ಮ ಹೆಸರು ಇಲ್ಲಿ" />
          <div style="display:flex;gap:10px">
            <button class="btn btn-primary" id="startBtn" onclick="startQuiz()">Register & Start Quiz</button>
            <button class="btn btn-ghost" id="downloadBtn">Download HTML</button>
          </div>
          <p class="small-muted">ಪ್ರತಿ ಪ್ರಶ್ನೆಗೆ 30 ಸೆಕೆಂಡು. ಎ ಆಯ್ಕೆಗೆ ಯಾವತ್ತೂ "ಗೊತ್ತಿಲ್ಲ".</p>
        </div>
      </div>

      <!-- Quiz -->
      <div id="quizCard" class="card" style="display:none;margin-top:16px">
        <div class="meta">
          <div style="display:flex;align-items:center;gap:12px">
            <div class="timer" id="timer">⏱ 00:30</div>
            <div class="small-muted" id="qcount">Q 0 / 200</div>
          </div>
          <div class="progress" aria-hidden><i id="progressBar"></i></div>
        </div>

        <div>
          <div class="question-title" id="questionTitle">Question</div>
          <div class="options" id="optionsWrap"></div>

          <div class="controls">
            <button class="btn btn-ghost" id="prevBtn">← Prev</button>
            <button class="btn btn-ghost" id="nextBtn">Next →</button>
            <div style="flex:1"></div>
            <button class="btn btn-primary" id="submitBtn">Submit Quiz</button>
          </div>
        </div>
      </div>

      <!-- Result -->
      <div id="finalCard" class="card" style="display:none;margin-top:16px">
        <h2 id="finalTitle">Results</h2>
        <p id="finalSummary"></p>
        <div class="result-table" id="answersList"></div>
        <div style="margin-top:14px">
          <button class="btn btn-primary" id="retakeBtn">Retake Quiz</button>
          <button class="btn btn-ghost" id="downloadResultsBtn">Download Results</button>
        </div>
      </div>
    </div>

    <div class="right">
      <div class="card">
        <h3>Quiz Info</h3>
        <div class="side-list" style="margin-top:8px">
          <div class="info-row"><span>Questions</span><span>200</span></div>
          <div class="info-row"><span>Per Question</span><span>30 sec</span></div>
          <div class="info-row"><span>Total Time</span><span>~100 min (approx)</span></div>
          <div class="info-row"><span>Pass Criteria</span><span>>50%</span></div>
        </div>
      </div>

      <div class="card" style="margin-top:12px">
        <h3>Your Progress</h3>
        <div style="margin-top:8px">
          <div class="info-row"><span>Current</span><span id="currentInfo">0 / 200</span></div>
          <div class="info-row"><span>Answered</span><span id="answeredInfo">0</span></div>
          <div class="info-row"><span>Not Answered</span><span id="notAnsweredInfo">200</span></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
/* ============================
   QUESTIONS: 200 items (mixed)
   Each item: { q: "...", options: ["A","B","C","D","ಗೊತ್ತಿಲ್ಲ"], answer: "one of first 4" }
   E always last = "ಗೊತ್ತಿಲ್ಲ"
   ============================ */
const QUESTIONS = [
/* 1-20 Karnataka & South Indian history */
{q:"1. ವಿಜಯನಗರ ಸಾಮ್ರಾಜ್ಯವನ್ನು ಸ್ಥಾಪಿಸಿದವರು ಯಾರು?", options:["ಹರಿಹರ ಮತ್ತು ಬುಕ್ಕ","ಕೃಷ್ಣದೇವರಾಯ","ಅಚ್ಯುತದೇವರಾಯ","ಬುಕ್ಕರಾಯ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಹರಿಹರ ಮತ್ತು ಬುಕ್ಕ"},
{q:"2. ತಾಲಿಕೋಟೆ ಯುದ್ಧ ಯಾವ ವರ್ಷದಲ್ಲಿ ನಡೆದಿದೆ?", options:["1565","1526","1600","1556","ಗೊತ್ತಿಲ್ಲ"], answer:"1565"},
{q:"3. ಕೃಷ್ಣದೇವರಾಯನ ಆಧುನಿಕ ಪ್ರಭಾವ ಯಾವ ಕ್ಷೇತ್ರದಲ್ಲಿ ಪಟ್ಟಿದೆ?", options:["ಸಾಹಿತ್ಯ ಮತ್ತು ಕಲಾ","ವ್ಯಾಪಾರ","ಕೃಷಿ","ವೈದ್ಯಕ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಸಾಹಿತ್ಯ ಮತ್ತು ಕಲಾ"},
{q:"4. ಬಸವಣ್ಣ ಅವರು ಯಾವ ಚಳವಳಿಗೆ ಸಂಬಂಧಿಸಿದ್ದಾರೆ?", options:["ಶೈವ ಸಮಾಜಸಂಘಟನೆ (ವಚನ ಆಂದೋಲನ)","ಭಾನುವಾಹಿನಿ","ವಾಣಿಜ್ಯ","ನಾಟಕ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಶೈವ ಸಮಾಜಸಂಘಟನೆ (ವಚನ ಆಂದೋಲನ)"},
{q:"5. ರಾಣಿ ಚೆನ್ನಮ್ಮ ಯಾವ ರಾಜ್ಯದ ಸ್ವರಾಜ್ಯ ನಾಯಕಿ ಆಗಿದ್ದಾಳೆ?", options:["ಕರ್ಣಾಟಕ","ಮಹಾರಾಷ್ಟ್ರ","ತಮಿಳುನಾಡು","ಆಂಧ್ರಪ್ರದೇಶ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಕರ್ಣಾಟಕ"},
{q:"6. ತಮಿಳುನಾಡಿನ ಪ್ರಸಿದ್ಧ ಬ್ರಹಡೀಶ್ವರ ದೇವಾಲಯ ಯಾವುದಲ್ಲಿದೆ?", options:["ತಂಜಾವೂರ್","ಅಗ್ರಾ","ದಿಲ್ಲಿ","ಮೈಸೂರು","ಗೊತ್ತಿಲ್ಲ"], answer:"ತಂಜಾವೂರ್"},
{q:"7. ಹಂಪಿ ನಗರವು ಯಾವ ನದಿಯ ಕಿರಿಯೆ ಮೇಲೆ ಇದೆ?", options:["ಟುಂಗಭದ್ರಾ","ಕೃಷ್ಣ","ಕಾವೇರಿ","ಯಮುನಾ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಟುಂಗಭದ್ರಾ"},
{q:"8. ಬಹುಮನಿ ರಾಜ್ಯ ಸ್ಥಾಪನೆ ಯಾರು ನಡೆಸಿದರು?", options:["ಅಲೌದ್ದೀನ್ ಹಸನ್ ಬಾಹ್ಮನ್","ಬಾಬರ್","ಅಕಬರ್","ಶಾಹಜಹಾನ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಅಲೌದ್ದೀನ್ ಹಸನ್ ಬಾಹ್ಮನ್"},
{q:"9. ಹೊಯ್ಸಳ ವಾಸ್ತುಶಿಲ್ಪದ ಪ್ರಮುಖ ವಿಷಯ ಯಾವದು?", options:["ಕಲ್ಲು ಶಿಲ್ಪಕಲಾ","ಇಂಪು","ಲೋಹದ ಕಾಮಗಾರ್ಯ","ಕಂಪ್ಯೂಟರ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಕಲ್ಲು ಶಿಲ್ಪಕಲಾ"},
{q:"10. ವಿಜಯನಗರದ ಪ್ರಮುಖ ಪಂಗಡ ಯಾವದು?", options:["ವ್ಯಾಪಾರ ಮತ್ತು ಕೈಗಾರಿಕೆ","ಕೃಷಿ","ಕಲ್ಪನೆ","ಚಿತ್ರಕಲೆ","ಗೊತ್ತಿಲ್ಲ"},
{q:"11. ಕೆಂಪೇಗೌಡರನ್ನು ಯಾವ ನಗರ ಸ್ಥಾಪನೆಗೆ ಸಂಬಂಧಿಸಲಾಗುತ್ತದೆ?", options:["ಬೆಂಗಳೂರು","ಮೈಸೂರು","ಹುಬ್ಬಳ್ಳಿ","ದಾವಣಗೆರೆ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಬೆಂಗಳೂರು"},
{q:"12. ವಿಜಯನಗರ ದ್ವಯದ ಕುಸಿತಕ್ಕೆ ಪ್ರಮುಖ ಕಾರಣ ಯಾವದು?", options:["ತಾಳಿಕೋಟೆ ಯುದ್ಧ","ಅಂತರಿಕ ಸಂಘರ್ಷ","ಭೂಕಂಪ","ಮಳೆಯ ಕೊರತೆ","ಗೊತ್ತಿಲ್ಲ"], answer:"ತಾಳಿಕೋಟೆ ಯುದ್ಧ"},
{q:"13. ಬೃಹತ್ಸಂಸ್ಥಾಪನೆ ಕೃಷ್ಣದೇವರಾಯನ ಕಾಲದ ರಾಜ್ಯ ಯಾವದು?", options:["ವಿಜಯನಗರ","ಚೋಳ","ಚಾಲುಕ್ಯ","ಮೌರ್ಯ","ಗೊತ್ತಿಲ್ಲ"], answer:"ವಿಜಯನಗರ"},
{q:"14. ಪಂಪಭಟ್ ಕನ್ನಡದ ಲೇಖಕರಲ್ಲಿ ಯಾವ ಭಾಷೆಯವರು?", options:["ಕನ್ನಡ","ತುಳು","ತಮಿಳು","ತೇಳುಗು","ಗೊತ್ತಿಲ್ಲ"], answer:"ಕನ್ನಡ"},
{q:"15. ಬೀಜಾಪುರದಲ್ಲಿನ ಕಲಾ ಶೈಲಿ ಯಾವುದಕ್ಕೆ ಸಮೀಪವಿದೆ?", options:["ಇಸ್ಲಾಮಿಕ್-ಪರ್ಸಿಯನ್ ಶೈಲಿ","ಚೋಳ ಶೈಲಿ","ಗುಪ್ತ ಶೈಲಿ","ಹೋಯ್ಸಳ ಶೈಲಿ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಇಸ್ಲಾಮಿಕ್-ಪರ್ಸಿಯನ್ ಶೈಲಿ"},
{q:"16. ಹೋಯ್ಸಳರ ಪ್ರಮುಖ ಕೇಂದ್ರ ಯಾವದು?", options:["ಹಾಸನ","ಮೈಸೂರು","ಬೆಳಗಾವಿ","ಬೆಂಗಳೂರ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಹಾಸನ"},
{q:"17. ವಿಜಯನಗರದ ರಾಜಧಾನಿ ಯಾವುದು?", options:["ಹಂಪಿ","ಮೈಸೂರು","ಮುಂಬೈ","ಹೈದರಾಬಾದ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಹಂಪಿ"},
{q:"18. ಭಹ್ಮನಿ ಸಾಮ್ರಾಜ್ಯದ ಸ್ಥಾಪನೆಯು ಯಾವ ಶತಮಾನದಲ್ಲಿ?", options:["14ನೇ ಶತಮಾನ","13ನೇ ಶತಮಾನ","15ನೇ ಶತಮಾನ","16ನೇ ಶತಮಾನ","ಗೊತ್ತಿಲ್ಲ"], answer:"14ನೇ ಶತಮಾನ"},
{q:"19. ವಿಜಯನಗರದ ಪ್ರಸಿದ್ಧ ವೃತ್ತಿ ಯಾವುದು?", options:["ಕಂಪ್ಯೂಟರ್ (ಹಳೆಯ ಯುಗದಲ್ಲಿ ವ್ಯಾಪಾರ)","ಲೇಟರ್","ಟೆಸ್ಟ್","ವಿದ್ಯುತ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಕಂಪ್ಯೂಟರ್ (ಹಳೆಯ ಯುಗದಲ್ಲಿ ವ್ಯಾಪಾರ)"},
{q:"20. ತರಾಭಾಗದಲ್ಲಿ ಹಂಪಿಯ ವ್ಯಾಪಾರವೇನೆಂದು ಪರಿಗಣಿಸಲಾಗಿದೆ?", options:["ಕಂಚು, ಆಭರಣ ಮತ್ತು ವಸ್ತ್ರ ವಾಣಿಜ್ಯ","ಕೃಷಿ","ಕಾರ್ಖಾನೆ","ವಿದ್ಯುತ್","ಗೊತ್ತಿಲ್ಲ"},

/* 21-60 Indian ancient/medieval general */
{q:"21. ಮೌರ್ಯ ಸಾಮ್ರಾಜ್ಯದ ಸ್ಥಾಪಕರೊಬ್ಬರು ಯಾರು?", options:["ಚಂದ್ರಗುಪ್ತ ಮೌರ್ಯ","ಅಶೋಕ","ಚಾಣಕ್ಯ","ವಿಕ್ರಮ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಚಂದ್ರಗುಪ್ತ ಮೌರ್ಯ"},
{q:"22. ಅಶೋಕನ ಧರ್ಮನೀತಿಯ ಪ್ರಮುಖ ವಿಚಾರ ಯಾವದು?", options:["ಅಹಿಂಸೆ ಮತ್ತು ಧರ್ಮ","ಯುದ್ಧ","ವ್ಯಾಪಾರ","ವೈಭವ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಅಹಿಂಸೆ ಮತ್ತು ಧರ್ಮ"},
{q:"23. ಗುಪ್ತ ಕಾಲವನ್ನು ಸಾಮಾನ್ಯವಾಗಿ ಏನೆಂದು ಕರೆದಿದ್ದಾರೆ?", options:["Golden Age","Dark Age","Bronze Age","Iron Age","ಗೊತ್ತಿಲ್ಲ"], answer:"Golden Age"},
{q:"24. ತಾಜ್ ಮಹಲ್ ಅನ್ನು ನಿರ್ಮಿಸಿದ ರಾಜ ಯಾರು?", options:["ಶಾಹ್ ಜಹಾನ್","ಅಕಬರ್","ಬಾಬರ್","ಅೂರಂಗಜೇಬ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಶಾಹ್ ಜಹಾನ್"},
{q:"25. ಪ್ಲಾಸಿ ಯುದ್ಧ ಯಾವ ವರ್ಷ?", options:["1757","1761","1776","1800","ಗೊತ್ತಿಲ್ಲ"], answer:"1757"},
{q:"26. ತಕ್ಷಶಿಲಾ ಯಾವ ಕಾರ್ಯಕ್ಕೆ ಪ್ರಸಿದ್ಧಿ ಪಡೆದಿತ್ತು?", options:["ಅಧ್ಯಯನ ಮತ್ತು ಶಿಕ್ಷಣ","ವಾಣಿಜ್ಯ","ಯುದ್ಧ","ಆರೋಗ್ಯ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಅಧ್ಯಯನ ಮತ್ತು ಶಿಕ್ಷಣ"},
{q:"27. ಹರಪ್ಪಾ ನಾಗರಿಕತೆಯ ಪ್ರಮುಖ ಲಕ್ಷಣ ಯಾವುದು?", options:["ನಗರ ಯೋಜನೆ ಮತ್ತು ನೀರಾವರಿ","ರಾಜವಂಶ","ಕೃಷಿ ವ್ಯವಸ್ಥೆ","ವಾಣಿಜ್ಯ ಸಿಂರ","ಗೊತ್ತಿಲ್ಲ"], answer:"ನಗರ ಯೋಜನೆ ಮತ್ತು ನೀರಾವರಿ"},
{q:"28. ಬಾಬರ್ ಭಾರತದ ಮೇಲೆ ಯಾವ ವೇಳೆಗೆ ಬಂದನು?", options:["1526","1498","1605","1707","ಗೊತ್ತಿಲ್ಲ"], answer:"1526"},
{q:"29. ಆಕರ್ಷಕ ಆಕ್ರೋಶವನ್ನು ತೋರಿಸುವ ಯುದ್ಧ ಯಾವದು?", options:["ವಾಟರ್ಲೂ","ಟ್ರಾಫಲ್ಗರ್","ಪ್ಲಾಸಿ","ಬುಧ","ಗೊತ್ತಿಲ್ಲ"], answer:"ವಾಟರ್ಲೂ"},
{q:"30. ಮೊಘಲ್ ಸಾಮ್ರಾಜ್ಯದ ಸ್ಥಾಪನೆಗೆ ಮುಖ್ಯ ಪಾತ್ರದಾರ ಯಾರು?", options:["ಬಾಬರ್","ಅಕಬರ್","ಶಾಹಜಹಾನ್","ಅೂರಂಗಜೇಬ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಬಾಬರ್"},
{q:"31. ಅಶೋಕನ ಶಿಲಾಶಾಸನಗಳಲ್ಲಿ ಮುಖ್ಯ ಸಂದೇಶ ಯಾವದು?", options:["ಧರ್ಮ ಮತ್ತು ನೈತಿಕತೆ","ವ್ಯಾಪಾರ","ಯುದ್ಧ","ವಸತಿ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಧರ್ಮ ಮತ್ತು ನೈತಿಕತೆ"},
{q:"32. ಗುಪ್ತರ ಸರ್ಕಾರ ಯಾವ ಕ್ಷೇತ್ರದಲ್ಲಿ ಸಿದ್ದಹಸ್ತತೆ ತೋರಿತು?", options:["ಕಲೆ ಮತ್ತು ವಿಜ್ಞಾನ","ಯುದ್ಧ","ಕೃಷಿ","ಸಂಸ್ಥಾ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಕಲೆ ಮತ್ತು ವಿಜ್ಞಾನ"},
{q:"33. ಹರಪ್ಪಾ ನಾಗರಿಕತೆಯ ಪ್ರಮುಖ ಪುರಾತತ್ವ ಸೈಟ್ ಯಾವುದು?", options:["ಮೋಹೆಂಜೋ-ದಾರೋ","ಹಂಪಿ","ತಂಜಾವೂರ್","ಅಗ್ರಾ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಮೋಹೆಂಜೋ-ದಾರೋ"},
{q:"34. ಕೌಟಿಲ್ಯ (ಚಾಣಕ್ಯ) ಬರಹವಾದ ಮಹತ್ವದ ಪುಸ್ತಕ ಯಾವದು?", options:["ಅರ್ಥಶಾಸ್ತ್ರ","ಧರ್ಮಶಾಸ್ತ್ರ","ವಾಸ್ತುಶಾಸ್ತ್ರ","ಆಯುರ್ವೇದ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಅರ್ಥಶಾಸ್ತ್ರ"},
{q:"35. ಚೋಳ ಸಾಮ್ರಾಜ್ಯ ಯಾವ ದೆಶದಲ್ಲಿ ಶಕ್ತಿಯಲ್ಲಿಿತ್ತು?", options:["ದಕ್ಷಿಣ ಭಾರತ (ತಮಿಳುನಾಡು)","ಉತ್ತರ ಭಾರತ","ಮಧ್ಯಪ್ರದೇಶ","ಪಶ್ಚಿಮ","ಗೊತ್ತಿಲ್ಲ"], answer:"ದಕ್ಷಿಣ ಭಾರತ (ತಮಿಳುನಾಡು)"},
{q:"36. ತಾಜ್ ಮಹಲ್ ಯಾವ ನಗರದಲ್ಲಿದೆ?", options:["ಅಗ್ರಾ","ಮೈಸೂರು","ಬೆಂಗಳೂರ","ಹೈದರಾಬಾದ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಅಗ್ರಾ"},
{q:"37. ಬಾಬರ್ ಭಾರತದ ಮೇಲೆ ಜಯ ಸಾಧಿಸಿದ ಪ್ರಮುಖ ಯುದ್ಧ ಯಾವದು?", options:["ಪ್ಲಾಸಿ","ತಾಲಿಕೋಟೆ","ಪಟಾ","ವಿಜಯಪುರ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಪ್ಲಾಸಿ"},
{q:"38. ನೆಹರು ಭಾರತದ ಯಾವ ಸ್ಥಾನದಲ್ಲಿ ಪ್ರಸಿದ್ಧ?", options:["ಪ್ರಥಮ ಪ್ರಧಾನಮಂತ್ರಿ","ರಾಜ್ಯಪಾಲ","ಅಧ್ಯಕ್ಷ","ಮುಖ್ಯ ನ್ಯಾಯಾಧೀಶ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಪ್ರಥಮ ಪ್ರಧಾನಮಂತ್ರಿ"},
{q:"39. ಸ್ವಾತಂತ್ರ್ಯ ಹೋರಾಟದಲ್ಲಿ ಮಹಾತ್ಮಾ ಗಾಂಧಿ ಯಾವ ತತ್ವ ಬಳಿಸಿದರು?", options:["ಸತ್ಯಾಗ್ರಹ ಮತ್ತು ಅಹಿಂಸೆ","ಹಿಂಸಾತ್ಮಕ ಯುದ್ಧ","ವಾಣಿಜ್ಯ ಬಾಯಾಟ","ಕಲೆ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಸತ್ಯಾಗ್ರಹ ಮತ್ತು ಅಹಿಂಸೆ"},
{q:"40. Quit India ಅಭಿಯಾನ ಯಾವ ವರ್ಷದಲ್ಲಿ?", options:["1942","1930","1920","1919","ಗೊತ್ತಿಲ್ಲ"], answer:"1942"},

/* 41-80 Biology & Ecology */
{q:"41. DNA ಅರ್ಥ ಏನು?", options:["Deoxyribonucleic Acid","Ribonucleic Acid","Nucleic Protein","Deoxyacid","ಗೊತ್ತಿಲ್ಲ"], answer:"Deoxyribonucleic Acid"},
{q:"42. ಜೀವಸಂರಚನೆಯ ಮೂಲ ಘಟಕ ಯಾವದು?", options:["ಕೋಶ (Cell)","ಅಣು","ಮೋಲೆ","ಅಣುಶಕ್ತಿ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಕೋಶ (Cell)"},
{q:"43. ಫೋಟೋಸಿಂಥೆಸಿಸ್ ಮುಖ್ಯ ಉತ್ಪನ್ನ ಯಾವುದು?", options:["ಗ್ಲೂಕೋಸ್ ಮತ್ತು O2","CO2","N2","ಪ್ರೋಟೀನ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಗ್ಲೂಕೋಸ್ ಮತ್ತು O2"},
{q:"44. ಪ್ರಾಣಿ ದೇಹದಲ್ಲಿ ರಕ್ತದ ಮುಖ್ಯ ಕಾರ್ಯವೇನು?", options:["ಪೋಷಕಾಂಶ ಮತ್ತು ಆಮ್ಲಜನಕದ ಸಾಗಣೆ","ಗಾಳಿ","ಬಲ","ಸ್ಥಿತಿ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಪೋಷಕಾಂಶ ಮತ್ತು ಆಮ್ಲಜನಕದ ಸಾಗಣೆ"},
{q:"45. ಪ್ರತಿರೋಧಕ ವ್ಯವಸ್ಥೆಯ ಪ್ರಮುಖ ಅಂಗ ಯಾವುದು?", options:["ತೆಲ್ಡಿ (Immune system)","ಹೃದಯ","ಉದು","ಮೂಳೆ","ಗೊತ್ತಿಲ್ಲ"], answer:"ತೆಲ್ಡಿ (Immune system)"},
{q:"46. ಬ್ಯಾಕ್ಟೀರಿಯಾ ವಿಭಜನೆದ ಮೂಲಕ ಹೇಗೆ ವೃದ್ಧಿಸುತ್ತವೆ?", options:["ಬೈನರಿ ಫಿಷನ್ (Binary fission)","ಸಾಂದ್ರಿಕೆ","ವೃದ್ಧಿ","ವಿಭಜನೆ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಬೈನರಿ ಫಿಷನ್ (Binary fission)"},
{q:"47. ಹೋಮಿಯೋಸ್ಟಾಸಿಸ್ ಅಂದರೆ?", options:["ಶರೀರದ ಸ್ಥಿರತೆ","ವೃದ್ಧಿ","ಆಹಾರ","ವ್ಯಾಪಾರ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಶರೀರದ ಸ್ಥಿರತೆ"},
{q:"48. ಆಂಟಿಬಯೋಟಿಕ್ ಬಳಸುವಾಗ ಎಚ್ಚರಿಕೆ ಏಕೆ ಬೇಕು?", options:["ಬ್ಯಾಕ್ಟೀರಿಯಲ್ ಸೋಂಕುಗಳಿಗೆ ಮಾತ್ರ","ವೈರಲ್ ಸೋಂಕುಗಳಿಗೆ","ಫಂಗಲ್ ಸೋಂಕುಗಳಿಗೆ","ಎಲ್ಲದಕ್ಕೂ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಬ್ಯಾಕ್ಟೀರಿಯಲ್ ಸೋಂಕುಗಳಿಗೆ ಮಾತ್ರ"},
{q:"49. ಪರಿಸರ ನಷ್ಟಕ್ಕೆ ಮುಖ್ಯ ಕಾರಣವೇನು?", options:["ಮಳೆಕಡಿಮೆ ಮತ್ತು ಮಲಿನೀಕರಣ","ವಿದ್ಯುತ್ ನೆಟ್","ಕಲಾ","ತಂತ್ರ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಮಲಿನೀಕರಣ"},
{q:"50. ಜೈವವೈವಿಧ್ಯತೆಯ ಉದ್ದೇಶವೇನು?", options:["ಈಕೋ ಸಿಸ್ಟಮ್ ಸಮತೋಲನ","ಕೇವಲ ತೋಟ","ರಂಗ","ತಾಣ","ಗೊತ್ತಿಲ್ಲ"},

{q:"51. ಸಸ್ಯಗಳಲ್ಲಿ ನೈಸರ್ಗಿಕ ಜಲ ಸಂಚಯದಲ್ಲಿ ಪ್ರಮುಖ ಭಾಗ ಯಾವುದು?", options:["ಸ್ಟೋಮಾಟಾ","ರೇಡಿಯಲ್","ವೆನ್","ಕೋಶ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಸ್ಟೋಮಾಟಾ"},
{q:"52. ಜೀವಾಣುಗಳು (microbes) ಯಾವಾಗ ಉಪಯುಕ್ತವಾಗುತ್ತವೆ?", options:["ಬಾಯೋಡಿಗ್ರಡೇಶನ್ ಮತ್ತು غذا ಪುನರುಚಿತೆಗೆ","ಬಾಡಾಯ","ವಾಣಿಜ್ಯ","ಕಲೆ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಬಾಯೋಡಿಗ್ರಡೇಶನ್ ಮತ್ತು غذا ಪುನರುಚಿತೆಗೆ"},
{q:"53. ಜನ್ಯತಾತ್ವಿಕತೆ ಕುರಿತಾಗುವ ವಿಷಯ ಯಾವುದು?", options:["ಜೆನ್ಸ್ ಮತ್ತು ಅಲಿಲ್ಗಳು","ಬಾಹ್ಯ ಲಕ್ಷಣ","ವ್ಯಕ್ತಿ","ಗೊತ್ತಿಲ್ಲ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಜೆನ್ಸ್ ಮತ್ತು ಅಲಿಲ್ಗಳು"},
{q:"54. ಮ್ಯುಟೇಶನ್ ಎಂದರೆ?", options:["DNA ನಲ್ಲಿ ಬದಲಾವಣೆ","ಆರೋಗ್ಯ","ಪರಿಸರ","ಮನೋವೈಜ್ಞಾನ","ಗೊತ್ತಿಲ್ಲ"], answer:"DNA ನಲ್ಲಿ ಬದಲಾವಣೆ"},
{q:"55. ಆಂಟಿಬಾಡಿಗಳು ಯಾರಿಂದ ಉತ್ಪಾದಿತವಾಗುತ್ತವೆ?", options:["B-cells","T-cells","ಮ್ಯಾಕ್ರೋಫೇಜ್","ನ್ಯೂಟ್ರೋಫಿಲ್","ಗೊತ್ತಿಲ್ಲ"], answer:"B-cells"},
{q:"56. ಸಸ್ಯ ಸೆಲ್‌ನಲ್ಲಿ ಎಲ್ಲಿ ಕ್ಲೋರೋಪ್ಲಾಸ್ಟ್ ಇರುತ್ತದೆ?", options:["ಸಸ್ಯ ಕೊಶದಲ್ಲಿ","ಪ್ರಾಣಿ ಕೊಶದಲ್ಲಿ","ಮೈಟೋಕಾಂಡ್ರಿಯಾ","ರೈಬೋಸೋಮ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಸಸ್ಯ ಕೊಶದಲ್ಲಿ"},
{q:"57. ಜೀವಶಾಸ್ತ್ರದಲ್ಲಿ ಟೆಕ್ಸನಾಮಿ ಯಾವುದು?", options:["ಪ್ರಾಣಿಗಳು, ಸಸ್ಯಗಳ ವರ್ಗೀಕರಣ","ಗಣಿತ","ರಸಾಯನ","ವಿಜ್ಞಾನ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಪ್ರಾಣಿಗಳು, ಸಸ್ಯಗಳ ವರ್ಗೀಕರಣ"},
{q:"58. ಮನುಷ್ಯ ದೇಹದಲ್ಲಿ ಎಲ್ಲಿ ರಕ್ತ ಕೋಶ ರಚನೆ ಆಗುತ್ತದೆ?", options:["ಬೋನ್ ಮರುವ (Bone marrow)","ಹೃದಯ","ಲಿವರ್","ಮಜ್ಜೆ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಬೋನ್ ಮರುವ (Bone marrow)"},
{q:"59. ಬ್ಯಾಕ್ಟೀರಿಯಾ ಉತ್ಪಾದಿತ ಎಂಜೈಮ್‌ಗಳು ಯಾವಾಗ ಉಪಯುಕ್ತ?", options:["ಉದ್ಯಮದಲ್ಲಿ ಮತ್ತು ವೈದ್ಯಕೀಯದಲ್ಲಿ","ರಂಗ","ಸಂಗೀತ","ಕಲೆ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಉದ್ಯಮದಲ್ಲಿ ಮತ್ತು ವೈದ್ಯಕೀಯದಲ್ಲಿ"},
{q:"60. ಇನ್ಸುಲಿನ್ ಸ್ರಾವಣವು ಯಾವ ಅಂಗದಿಂದ?", options:["ಪ್ಯಾಂಕ್ರಿಯಾಸ್","ಹೃದಯ","ಲಿವರ್","ಕಿಡ್ನಿ"," ಗೊತ್ತಿಲ್ಲ"], answer:"ಪ್ಯಾಂಕ್ರಿಯಾಸ್"},

/* 81-120 Physics */
{q:"61. ವೇಗದ ಯುನಿಟ್ ಯಾವದು?", options:["m/s","km/h","mph","ft/s","ಗೊತ್ತಿಲ್ಲ"], answer:"m/s"},
{q:"62. ನ್ಯೂಟನಿನ ಮೊದಲ ನಿಯಮದ ಹೆಸರು?", options:["ಜಡತ್ವ ನಿಯಮ","ವೇಗ ನಿಯಮ","ಬಲ ನಿಯಮ","ಪ್ರವಾಹ ನಿಯಮ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಜಡತ್ವ ನಿಯಮ"},
{q:"63. ಬೆಳಕು ಯಾವ ಸ್ವಭಾವ ತೋರಿಸುತ್ತದೆ?", options:["Wave-particle duality (ಎರಡೂ)","ಕೇವಲ ತರಂಗ","ಕೇವಲ ಕಣ","ಪ್ರೊಟಾನ್","ಗೊತ್ತಿಲ್ಲ"], answer:"Wave-particle duality (ಎರಡೂ)"},
{q:"64. ಸ್ಪೀಡ್ ಆಫ್ ಲೈಟ್ ಸಮೀಪ ಮೌಲ್ಯ ಏನು?", options:["3.00×10^8 m/s","1.00×10^6 m/s","3.00×10^6 m/s","1.00×10^3 m/s","ಗೊತ್ತಿಲ್ಲ"], answer:"3.00×10^8 m/s"},
{q:"65. ಒಹ್ಮ್ (Ohm) ನಿಯಮವನ್ನು ಯಾರಿಗೆ ಕರೆಸುತ್ತಾರೆ?", options:["ಒಂ (Ohm) — ವಿಲಿಯಂ ಓಮ್","ನ್ಯೂಟನ್","ಫಾರಡೆ","ಮ್ಯಾಕ್ಸ್‌ವೆಲ್","ಗೊತ್ತಿಲ್ಲ"], answer:"ಒಂ (Ohm) — ವಿಲಿಯಂ ಓಮ್"},
{q:"66. ವೇಗ ಮತ್ತು ದಿಕ್ಕಿನೊಂದಿಗೆ ಪರಿಭಾಷಿತ ಮೌಲ್ಯವೆಂದರೆ?", options:["ವೇಗ (Velocity)","ಸ್ಪೀಡ್","ಆಕ್ಸಿಲರೆಶನ್","ಬಲ","ಗೊತ್ತಿಲ್ಲ"], answer:"ವೇಗ (Velocity)"},
{q:"67. ಪ್ರತಿ ಕ್ರಿಯೆಗೆ ವಿರುದ್ಧ ಪ್ರತಿಕ್ರಿಯೆಯಾಗುತ್ತದೆ ಎಂಬುದು ಯಾವ ನಿಯಮ?", options:["ಆಕ್ಷನ್-ರಿಯಾಕ್ಷನ್ (Action-Reaction) — ನ್ಯೂಟನ್","ಋತ್ಸ","ಫ್ಲಂಟ್","ದAmen","ಗೊತ್ತಿಲ್ಲ"], answer:"ಆಕ್ಷನ್-ರಿಯಾಕ್ಷನ್ (Action-Reaction) — ನ್ಯೂಟನ್"},
{q:"68. ಲೆನ್ಸ್‌ನ ಮುಖ್ಯ ಕೆಲಸ ಯಾವದು?", options:["ಪ್ರಕಾಶವನ್ನು ಕೇಂದ್ರೀಕರಿಸುವುದು (focus)","ಹೋರಾಟ","ಸಂಗ್ರಹ","ಅಭ್ಯಾಸ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಪ್ರકાશವನ್ನು ಕೇಂದ್ರೀಕರಿಸುವುದು (focus)"},
{q:"69. ಮಾಗ್ನೆಟಿಕ್ ಕ್ಷೇತ್ರದ ದಿಕ್ಕು ಎಲ್ಲಿ ಕಂಡುಬರುತ್ತದೆ?", options:["ಉತ್ತರದಿಂದ ದಕ್ಷಿಣಕ್ಕೆ","ಪಶ್ಚಿಮದಿಂದ ಪೂರ್ವಕ್ಕೆ","ಉತ್ತರ-ಉತ್ತರ","ದಕ್ಷಿಣ ದಕ್ಷಿಣ","ಗೊತ್ತಿಲ್ಲ"], answer:"ಉತ್ತರದಿಂದ ದಕ್ಷಿಣಕ್ಕೆ"},
{q:"70. ವೋಲ್ಟೇಜ್ ಅನ್ನು ಯಾವ ಸಾಧನದಲ್ಲಿ ಅಳೆಯುತ್ತಾರೆ?", options:["ವೋಲ್ಟ್ಮೀಟರ್ (Voltmeter)","ಅಂಪಿಯರ್","ಒಹ್ಮ್‌ ಮೀಟರ್","ವಾಟ್ ಮೀಟರ್","ಗೊತ್ತಿಲ್ಲ"},

/* If QUESTIONS length isn't 200 due to accidental edits, pad by repeating first ones */
while (QUESTIONS.length < 200) {
  const i = QUESTIONS.length % 100;
  const src = QUESTIONS[i];
  QUESTIONS.push({ q: src.q + " (extra)", options: src.options.slice(), answer: src.answer });
}

/* ============================
   App State & DOM refs
   ============================ */
let username = "";
let currentIndex = 0;
const perQuestionTime = 30; // seconds
let timerInterval = null;
let timeLeft = perQuestionTime;
let userAnswers = Array(QUESTIONS.length).fill(null);

const introCard = document.getElementById('introCard');
const quizCard = document.getElementById('quizCard');
const finalCard = document.getElementById('finalCard');
const timerEl = document.getElementById('timer');
const qcountEl = document.getElementById('qcount');
const progressBar = document.getElementById('progressBar');
const questionTitle = document.getElementById('questionTitle');
const optionsWrap = document.getElementById('optionsWrap');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
const currentInfo = document.getElementById('currentInfo');
const answeredInfo = document.getElementById('answeredInfo');
const notAnsweredInfo = document.getElementById('notAnsweredInfo');
const finalTitle = document.getElementById('finalTitle');
const finalSummary = document.getElementById('finalSummary');
const answersList = document.getElementById('answersList');
const downloadBtn = document.getElementById('downloadBtn');
const retakeBtn = document.getElementById('retakeBtn');
const downloadResultsBtn = document.getElementById('downloadResultsBtn');

/* ---------------------------
   Helpers
   --------------------------- */
function renderQuestion(index){
  const q = QUESTIONS[index];
  // keep options order as given so E is always last
  questionTitle.innerHTML = `<b>Q${index+1}.</b> ${q.q}`;
  optionsWrap.innerHTML = '';
  q.options.forEach((optText, i) => {
    const div = document.createElement('div');
    div.className = 'opt';
    div.dataset.opt = optText;
    div.innerHTML = `<strong>${String.fromCharCode(65+i)}.</strong> ${optText}`;
    if(userAnswers[index] === optText) div.classList.add('selected');
    div.addEventListener('click', ()=> onSelectOption(div, index, optText));
    optionsWrap.appendChild(div);
  });

  qcountEl.textContent = `Q ${index+1} / ${QUESTIONS.length}`;
  currentInfo.textContent = `${index+1} / ${QUESTIONS.length}`;
  const answeredCount = userAnswers.filter(x=>x!==null).length;
  answeredInfo.textContent = answeredCount;
  notAnsweredInfo.textContent = QUESTIONS.length - answeredCount;
  updateProgress();
  resetTimer();
}

function onSelectOption(domNode, qIndex, optText){
  const correctText = QUESTIONS[qIndex].answer;
  // store selection (user can change until time ends or manual next)
  userAnswers[qIndex] = optText;

  Array.from(optionsWrap.children).forEach(ch=>{
    ch.classList.remove('correct','wrong','selected');
  });

  Array.from(optionsWrap.children).forEach(ch=>{
    const t = ch.dataset.opt;
    if(t === optText) ch.classList.add('selected');
    if(t === correctText) ch.classList.add('correct');
    else if(t === optText && t !== correctText) ch.classList.add('wrong');
  });

  const answeredCount = userAnswers.filter(x=>x!==null).length;
  answeredInfo.textContent = answeredCount;
  notAnsweredInfo.textContent = QUESTIONS.length - answeredCount;
}

/* Timer functions */
function resetTimer(){
  clearInterval(timerInterval);
  timeLeft = perQuestionTime;
  timerEl.textContent = `⏱ ${String(timeLeft).padStart(2,'0')}`;
  timerInterval = setInterval(()=>{
    timeLeft--;
    timerEl.textContent = `⏱ ${String(timeLeft).padStart(2,'0')}`;
    if(timeLeft <= 0){
      clearInterval(timerInterval);
      // auto advance
      if(currentIndex < QUESTIONS.length -1){
        currentIndex++;
        renderQuestion(currentIndex);
      } else {
        submitQuiz();
      }
    }
  },1000);
}

/* Update progress bar */
function updateProgress(){
  const answeredCount = userAnswers.filter(x=>x!==null).length;
  const percent = Math.round((answeredCount / QUESTIONS.length) * 100);
  progressBar.style.width = percent + '%';
}

/* NAV handlers */
prevBtn.addEventListener('click', ()=>{
  if(currentIndex > 0){
    currentIndex--;
    renderQuestion(currentIndex);
  }
});
nextBtn.addEventListener('click', ()=>{
  if(currentIndex < QUESTIONS.length -1){
    currentIndex++;
    renderQuestion(currentIndex);
  }
});

/* Start quiz */
function startQuiz(){
  const nameInput = document.getElementById('username');
  const name = nameInput.value.trim();
  if(!name){ alert('ದಯವಿಟ್ಟು ನಿಮ್ಮ ಹೆಸರು ನಮೂದಿಸಿ'); nameInput.focus(); return; }
  username = name;
  // Save locally
  try { localStorage.setItem('ajay_quiz_username', username); } catch(e){/* ignore */}
  introCard.style.display = 'none';
  quizCard.style.display = 'block';
  finalCard.style.display = 'none';
  currentIndex = 0;
  userAnswers = Array(QUESTIONS.length).fill(null);
  renderQuestion(currentIndex);
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* Submit quiz */
submitBtn.addEventListener('click', submitQuiz);
function submitQuiz(){
  clearInterval(timerInterval);
  let score = 0;
  for(let i=0;i<QUESTIONS.length;i++){
    if(userAnswers[i] && userAnswers[i] === QUESTIONS[i].answer) score++;
  }
  const percent = Math.round((score / QUESTIONS.length) * 100);
  const passed = percent > 50;
  finalTitle.textContent = passed ? '🎉 ನೀವು ಓಡುತ್ತಿದ್ದೀರಿ! / You are doing well!' : '😢 ನೀವು ಓದುತ್ತಿಲ್ಲ! / You are not studying well!';
  finalSummary.innerHTML = `<b>${username}</b>, Marks: <b>${score}</b> / ${QUESTIONS.length} — Percentage: <b>${percent}%</b>`;

  answersList.innerHTML = '';
  for(let i=0;i<QUESTIONS.length;i++){
    const q = QUESTIONS[i];
    const div = document.createElement('div');
    div.className = 'qa';
    const yourAns = userAnswers[i] || 'Not Answered';
    const correct = q.answer;
    div.innerHTML = `<strong>Q${i+1}.</strong> ${q.q}<br>
      <strong>Your:</strong> ${yourAns}<br>
      <strong>Correct:</strong> ${correct}
    `;
    answersList.appendChild(div);
  }

  quizCard.style.display = 'none';
  finalCard.style.display = 'block';
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* Retake */
retakeBtn.addEventListener('click', ()=>{
  finalCard.style.display = 'none';
  introCard.style.display = 'block';
  progressBar.style.width = '0%';
  document.getElementById('username').value = '';
});

/* Download handlers */
downloadBtn.addEventListener('click', ()=>{
  const html = '<!doctype html>\n' + document.documentElement.outerHTML;
  const blob = new Blob([html], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'ajay_full_quiz_200.html'; a.click();
  URL.revokeObjectURL(url);
});
downloadResultsBtn.addEventListener('click', ()=>{
  let score = 0;
  for(let i=0;i<QUESTIONS.length;i++){
    if(userAnswers[i] && userAnswers[i] === QUESTIONS[i].answer) score++;
  }
  const percent = Math.round((score / QUESTIONS.length) * 100);
  let content = `Ajay Kumar Quiz Results\nName: ${username}\nScore: ${score} / ${QUESTIONS.length}\nPercentage: ${percent}%\n\nDetails:\n`;
  for(let i=0;i<QUESTIONS.length;i++){
    content += `Q${i+1}: ${QUESTIONS[i].q}\nYour: ${userAnswers[i] || 'Not Answered'}\nCorrect: ${QUESTIONS[i].answer}\n\n`;
  }
  const blob = new Blob([content], {type:'text/plain'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'ajay_quiz_results.txt'; a.click();
  URL.revokeObjectURL(url);
});

/* Keyboard shortcuts */
document.addEventListener('keydown',(e)=>{
  if(quizCard.style.display === 'block'){
    if(e.key === 'ArrowRight') nextBtn.click();
    if(e.key === 'ArrowLeft') prevBtn.click();
    if(e.key === 'Escape') submitBtn.click();
  }
});

/* On load */
window.addEventListener('load', ()=>{
  introCard.style.display = 'block';
  quizCard.style.display = 'none';
  finalCard.style.display = 'none';
  progressBar.style.width = '0%';
});
</script>
</body>
</html>
